_format_version: "3.0"

services:
  - name: health-check-service
    url: https://dummyjson.com/products
    routes:
    - name: product-route
      paths:
        - /api/health-check
      methods:
        - "GET"
      strip_path: true
      protocols:
        - "http"
        - "https"

  - name: arithmetic-service
    url: http://arithmetic-backend-cluster-ip-service:80
    routes:
    - name: arithmetic-route
      paths:
        - /api/arithmetic
      methods:
        - "GET"
        - "POST"
        - "PUT"
        - "DELETE"
      strip_path: true
      protocols:
        - "http"
        - "https"
    plugins:
      - name: rate-limiting
        config:
          minute: 10
          policy: local
          limit_by: ip
          hide_client_headers: true
          fault_tolerant: false

plugins:
  - name: correlation-id
    config:
      header_name: Request-ID
      generator: uuid
      echo_downstream: true
